## 2. 核心配置文件

### 2.1 environments

**environments**：配置多个连接数据库的环境

​		**default**：设置默认使用的环境的id

**environment**：配置某个具体的环境

​		id：表示连接数据库的环境的唯一标识，不能重复

**transactionManager**：设置事务管理方式

​		**type**：

​				**JDBC**：表示当前环境中，执行SQL时使用的是JDBC中原生的事务管理方式，事务的提交或回滚需要手动处理

​				**MANAGED**：被管理，例如Spring

**dataSource**：配置数据源

​		**type**：设置数据源的类型

​				**POOLED**：表示使用数据库连接池缓存数据库连接

​				**UNPOOLED**：不使用数据库连接池

​				**JNDI**：表示使用上下文中的数据源

**property**：

​		name = "driver"：设置连接数据库的驱动

​		name = "url"：设置连接数据库的连接地址

​		name = "username"：设置连接数据库的用户名

​		name = "password"：设置连接数据库的密码

```xml
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE configuration
        PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-config.dtd">
<configuration>
    <environments default="development">
        <environment id="development">
            <transactionManager type="JDBC"/>
            <dataSource type="POOLED">
                <property name="driver" value="${jdbc.driver}"/>
                <property name="url" value="${jdbc.url}"/>
                <property name="username" value="${jdbc.username}"/>
                <property name="password" value="${jdbc.password}"/>
            </dataSource>
        </environment>
        <environment id="test">
            <transactionManager type="JDBC"/>
            <dataSource type="POOLED">
                <property name="driver" value="${jdbc.driver}"/>
                <property name="url" value="${jdbc.url}"/>
                <property name="username" value="${jdbc.username}"/>
                <property name="password" value="${jdbc.password}"/>
            </dataSource>
        </environment>
    </environments>
    <mappers>
        <mapper resource="mappers/UserMapper.xml"/>
    </mappers>
</configuration>
```

### 1.2 使用properties配置文件

在resources文件夹上点击右键：New --> Resource Bundle --> jdbc.properties

```properties
jdbc.driver=com.mysql.jdbc.Driver
jdbc.url=jdbc:mysql://localhost:3306/mybatis?useUnicode=true&amp;characterEncoding=utf-8
jdbc.username=root
jdbc.password=123456
```

在核心配置文件中引入properties文件并使用${}来引用properties中的数据：

```xml
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE configuration
        PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-config.dtd">
<configuration>

    <properties resource="jdbc.properties"/>
    
    <environments default="development">
        <environment id="development">
            <transactionManager type="JDBC"/>
            <dataSource type="POOLED">
                <property name="driver" value="${jdbc.driver}"/>
                <property name="url" value="${jdbc.url}"/>
                <property name="username" value="${jdbc.username}"/>
                <property name="password" value="${jdbc.password}"/>
            </dataSource>
        </environment>
    </environments>
    
    <mappers>
        <mapper resource="mappers/UserMapper.xml"/>
    </mappers>
    
</configuration>
```

### 1.3 typeAliases

设置某一个别名：

建议将别名设置成类名；alias属性可以不进行设置，当不设置alias属性时其别名默认为类名；别名不区分大小写；

```xml
<typeAliases>
    <typeAlias type="com.liaoii.mybatis.entity.User" alias="User"/>
</typeAliases>
```

以包为单位，将包下所有的类型设置默认的类型别名，即类名且不区分大小写：

```xml
<typeAliases>
    <package name="com.liaoii.mybatis.entity"/>
</typeAliases>
```

### 1.4 mappers

**引入单个mapper文件**：

```xml
<mappers>
    <mapper resource="mappers/UserMapper.xml"/>
</mappers>
```

**以包为单位引入mapper文件**：

首先在resources文件夹下创建包：New --> Directory

在填写多级包名时要写成 com/liaoii/mybatis/mapper，而不是 com.liaoii.mybatis.mapper，如果写成com.liaoii.mybatis.mapper只会创建一个文件夹，而不是多级文件夹

mapper接口所在的包要和映射文件所在的包一致；mapper接口要和映射文件的名字一致

```xml
<mappers>
    <package name="com.liaoii.mybatis.mapper"/>
</mappers>
```