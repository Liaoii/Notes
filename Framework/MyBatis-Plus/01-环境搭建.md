## 1. 环境搭建

### 1.1 创建数据库与表

```sql
CREATE DATABASE `mybatis_plus` 
USE `mybatis_plus`;
CREATE TABLE `user` (
	`id` BIGINT(20) NOT NULL COMMENT '主键ID',
	`name` VARCHAR(30) DEFAULT NULL COMMENT '姓名',
	`age` INT(11) DEFAULT NULL COMMENT '年龄',
	`email` VARCHAR(50) DEFAULT NULL COMMENT '邮箱',
PRIMARY KEY (`id`)
) ENGINE=INNODB DEFAULT CHARSET=utf8;
```

添加数据：

```sql
INSERT INTO USER (id, NAME, age, email) VALUES
(1, 'Jone', 18, 'test1@baomidou.com'),
(2, 'Jack', 20, 'test2@baomidou.com'),
(3, 'Tom', 28, 'test3@baomidou.com'),
(4, 'Sandy', 21, 'test4@baomidou.com'),
(5, 'Billie', 24, 'test5@baomidou.com');
```

### 1.2 创建工程

创建一个Empty Project：File --> New --> Project... --> Empty Project

​		Project name：MyBatis-Plus

修改Maven配置：File --> Setting... --> Build, Execution, Deployment --> Maven

​		Maven home path：

​		User settings file：

​		Local repository：

修改工程配置：File --> Project Structure... --> Project

​		SDK：1.8

​		Language level：8 - Lambdas, type annotations etc.

创建Module：File --> New --> Module... --> Spring Initializr

​		Name：MyBatisPlus01

​		Group：com.liaoii.mybatisplus

​		Package name：com.liaoii.mybatisplus

​		Project SDK：Project SDK 1.8

​		Java：8

​		Packaging：Jar

​		Spring Boot：2.6.9

删除.mvn、.gitignore、HELP.md、mvnw、mvnw.cmd、

**引入mybatis-plus-boot-starter、lombok、mysql-connector-java依赖**：

```xml
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <parent>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-parent</artifactId>
        <version>2.6.9</version>
        <relativePath/> <!-- lookup parent from repository -->
    </parent>

    <groupId>com.liaoii.mybatisplus</groupId>
    <artifactId>MyBatisPlus01</artifactId>
    <version>0.0.1-SNAPSHOT</version>
    <name>MyBatisPlus01</name>
    <description>MyBatisPlus01</description>

    <properties>
        <java.version>1.8</java.version>
    </properties>

    <dependencies>
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter</artifactId>
        </dependency>

        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-test</artifactId>
            <scope>test</scope>
        </dependency>
        <!--MyBatis Plus启动器-->
        <dependency>
            <groupId>com.baomidou</groupId>
            <artifactId>mybatis-plus-boot-starter</artifactId>
            <version>3.5.1</version>
        </dependency>

        <dependency>
            <groupId>org.projectlombok</groupId>
            <artifactId>lombok</artifactId>
            <optional>true</optional>
        </dependency>

        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <scope>runtime</scope>
        </dependency>
    </dependencies>

    <build>
        <plugins>
            <plugin>
                <groupId>org.springframework.boot</groupId>
                <artifactId>spring-boot-maven-plugin</artifactId>
            </plugin>
        </plugins>
    </build>

</project>
```

**下载lombok插件**：File --> Setting... --> Plugins --> Lombok

**修改配置文件application.yml**：

```yaml
spring:
  datasource:
    type: com.zaxxer.hikari.HikariDataSource
    driver-class-name: com.mysql.cj.jdbc.Driver
    url: jdbc:mysql://localhost:3306/mybatis_plus?characterEncoding=utf-8&userSSL=false&serverTimezone=GMT%2B8
    username: root
    password: 123456
```

**创建实体类User**：

```java
import lombok.*;

@NoArgsConstructor
@AllArgsConstructor
@Getter
@Setter
@EqualsAndHashCode
@ToString
public class User {
    private long id;
    private String name;
    private Integer age;
    private String email;
}
```

或者

```java
import lombok.*;

@Data
public class User {
    /**
     * 这里要使用包装类
     */
    private Long id;
    private String name;
    private Integer age;
    private String email;
}
```

@Data注解相当于@NoArgsConstructor、@Getter、@Setter、@EqualsAndHashCode、@ToString，但是不包括@AllArgsConstructor

**创建Mapper接口**：

```java
import com.baomidou.mybatisplus.core.mapper.BaseMapper;
import com.liaoii.mybatisplus.entity.User;
@Repository
public interface UserMapper extends BaseMapper<User> {
    
}
```

**在启动类上添加MapperScan注解**：

```java
@MapperScan("com.liaoii.mybatisplus.mapper")
@SpringBootApplication
public class MyBatisPlus01Application {

    public static void main(String[] args) {
        SpringApplication.run(MyBatisPlus01Application.class, args);
    }

}
```

**新建测试类MyBatisPlusTest**：

```java
@SpringBootTest
public class MyBatisPlusTest {

    @Autowired
    private UserMapper userMapper;

    @Test
    public void test01() {
        List<User> list = userMapper.selectList(null);
        list.forEach(System.out::println);
    }
}
```

**结果**：

```
User(id=1, name=Jone, age=18, email=test1@baomidou.com)
User(id=2, name=Jack, age=20, email=test2@baomidou.com)
User(id=3, name=Tom, age=28, email=test3@baomidou.com)
User(id=4, name=Sandy, age=21, email=test4@baomidou.com)
User(id=5, name=Billie, age=24, email=test5@baomidou.com)
```

**添加日志功能，修改application.yml文件**：

```yaml
spring:
  datasource:
    type: com.zaxxer.hikari.HikariDataSource
    driver-class-name: com.mysql.cj.jdbc.Driver
    url: jdbc:mysql://localhost:3306/mybatis_plus?characterEncoding=utf-8&userSSL=false&serverTimezone=GMT%2B8
    username: root
    password: 123456
mybatis-plus:
  configuration:
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl
```

**日志结果**：

```
==>  Preparing: SELECT id,name,age,email FROM user
==> Parameters: 
<==    Columns: id, name, age, email
<==        Row: 1, Jone, 18, test1@baomidou.com
<==        Row: 2, Jack, 20, test2@baomidou.com
<==        Row: 3, Tom, 28, test3@baomidou.com
<==        Row: 4, Sandy, 21, test4@baomidou.com
<==        Row: 5, Billie, 24, test5@baomidou.com
<==      Total: 5
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bebb74f]
User(id=1, name=Jone, age=18, email=test1@baomidou.com)
User(id=2, name=Jack, age=20, email=test2@baomidou.com)
User(id=3, name=Tom, age=28, email=test3@baomidou.com)
User(id=4, name=Sandy, age=21, email=test4@baomidou.com)
User(id=5, name=Billie, age=24, email=test5@baomidou.com)
```

