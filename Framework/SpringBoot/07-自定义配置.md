## 7. 自定义配置

可以通过 @Value("${}") 来读取配置：

```java
@RestController
public class SomeController {

    @Value("${server.port}")
    private String port;

    @Value("${company.name}")
    private String name;

    @GetMapping("/port")
    public String someHandler() {
        return "port: " + port;
    }

    @GetMapping("/name")
    public String nameHandler() {
        return "name: " + name;
    }
}
```

一般不将自定义配置放在 application.yml 中，而是放在自定义的 properties 文件中

**custom.properties**

```properties
student.name=张珊
student.age=18
student.score=99.9
```

新建实体类 Student：

```java
@Data
@Component
@PropertySource(value = "classpath:custom.properties", encoding = "UTF-8")
@ConfigurationProperties("student")
public class Student {
    private String name;
    private int age;
    private double score;
}
```

**SomeController**

```java
@RestController
public class SomeController {

    @Autowired
    private Student student;

    @GetMapping("/student")
    public String studentHandler() {
        return "student: " + student;
    }

}
```



**读取集合：**

**custom.properties**

```properties
country.cities[0]=Beijing
country.cities[1]=Shanghai
country.cities[2]=Guangzhou
```

**Country**

```java
@Data
@Component
@PropertySource(value = "classpath:custom.properties", encoding = "UTF-8")
@ConfigurationProperties("country")
public class Country {
    private List<String> cities;
}
```

**SomeController**

```java
@RestController
public class SomeController {

    @Autowired
    private Country country;

    @GetMapping("/country")
    public String countryHandler() {
        return "country: " + country.getCities();
    }

}
```

**级联属性：**

**custom.properties**

```properties
company.departs[0].name=产品一部
company.departs[0].office=501
company.departs[0].nums=10
company.departs[1].name=产品二部
company.departs[1].office=502
company.departs[1].nums=22
company.departs[2].name=产品三部
company.departs[2].office=503
company.departs[2].nums=15
```

**Depart**

```java
@Data
public class Depart {
    private String name;
    private String office;
    private int nums;
}
```

**Company**

```java
@Data
@Component
@PropertySource(value = "classpath:custom.properties", encoding = "UTF-8")
@ConfigurationProperties("company")
public class Company {
    private List<Depart> departs;
}
```

**SomeController**

```java
@RestController
public class SomeController {
    
    @Autowired
    private Company company;

    @GetMapping("/company")
    public String companyHandler() {
        return "company: " + company.getDeparts();
    }
}
```

