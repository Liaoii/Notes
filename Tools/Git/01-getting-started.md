## Getting Started

### 1. 关于版本控制

#### 1.1 什么是版本控制

版本控制是一种记录一个或若干文件内容变化，以便将来查阅特定版本修订情况的系统。

#### 1.2 版本控制系统比较

**本地版本控制系统**

① 在硬盘上保存补丁集（补丁是指文件修订前后的变化），通过应用所有的补丁，可以重新计算出各个版本的文件内容。

② 只要整个项目的历史记录被保存在单一位置，就有丢失所有历史更新记录的风险。

**集中化的版本控制系统**

① 集中化的版本控制系统都有一个单一的集中管理的服务器，用于保存所有文件的修订版本，而协同工作的人们都通过客户端连到这台服务器，取出最新的文件或者提交更新。

② 每个人都可以在一定程度上看到项目中的其他人正在做些什么。

③ 管理员可以轻松掌控每个开发者的权限，并且管理一个CVCS要远比在各个客户端上维护本地数据库来得轻松容易。

④ 集中化的版本控制系统的缺点是中央服务器的单点故障，如果出现宕机，将无法进行提交更新，也就无法协同工作。

⑤ 如果中心数据库所在的磁盘发生损坏，又没有做恰当备份，将丢失所有数据以及变更历史。

**分布式版本控制系统**

① 客户端并不只提取最新版本的文件快照， 而是把代码仓库完整地镜像下来，包括完整的历史记录。

② 任何一处协同工作用的服务器发生故障，事后都可以用任何一个镜像出来的本地仓库恢复。

### 2. Git

#### 2.1 Git是如何存储数据的

**其他版本控制系统**

其它大部分系统以文件变更列表的方式存储信息，这类系统（CVS、Subversion、Perforce、Bazaar 等等）将它们存储的信息看作是一组基本文件和每个文件随时间逐步累积的差异。

<left><img src="images\01-deltas.png"/></left>

**Git**

Git更像是把数据看作是对小型文件系统的一系列快照。 在Git中，每当你提交更新或保存项目状态时，它基本上就会对当时的全部文件创建一个快照并保存这个快照的索引。为了效率，如果文件没有修改，Git不再重新存储该文件，而是只保留一个链接指向之前存储的文件。 

<left><img src="images\02-snapshots.png"/></left>

#### 2.2 Git的特点

① 在Git中的绝大多数操作都只需要访问本地文件和资源，一般不需要来自网络上其它计算机的信息。因为你在本地磁盘上就有项目的完整历史，所以大部分操作看起来瞬间完成。

② Git中所有的数据在存储前都计算校验和，然后以校验和来引用。这意味着不可能在Git不知情时更改任何文件内容或目录内容。实际上，Git数据库中保存的信息都是以文件内容的哈希值来索引，而不是文件名。

③ 你执行的Git操作，几乎只往Git数据库中添加数据。 而很难使用Git从数据库中删除数据，也就是说Git几乎不会执行任何可能导致文件不可恢复的操作。

#### 2.3 Git的三种状态

Git有三种状态：**已提交（committed）**、**已修改（modified）**和**已暂存（staged）**。

① 已修改表示修改了文件，但还没保存到数据库中。

② 已暂存表示对一个已修改文件的当前版本做了标记，使之包含在下次提交的快照中。

③ 已提交表示数据已经安全地保存在本地数据库中。

<left><img src="images\03-areas.png"/></left>

#### 2.4 工作区、暂存区、仓库

① 工作区是对项目的某个版本独立提取出来的内容。 这些从Git仓库的压缩数据库中提取出来的文件，放在磁盘上供你使用或修改。

② 暂存区是一个文件，保存了下次将要提交的文件列表信息，一般在Git仓库目录中。按照Git的术语叫做”索引”，不过一般说法还是叫“暂存区”。

③ Git仓库目录是Git用来保存项目的元数据和对象数据库的地方。 这是Git中最重要的部分，从其它计算机克隆仓库时，复制的就是这里的数据。

**基本的 Git 工作流程如下：** 

① 在工作区中修改文件。

② 将你想要下次提交的更改选择性地暂存，这样只会将更改的部分添加到暂存区。

③ 提交更新，找到暂存区的文件，将快照永久性存储到 Git 目录。

如果Git目录中保存着特定版本的文件，就属于**已提交**状态。如果文件已修改并放入暂存区，就属于**已暂存**状态。 如果自上次检出后，作了修改但还没有放到暂存区域，就是**已修改**状态。

### 3. Git配置

#### 3.1 Git配置存储的位置

① `/etc/gitconfig` 文件: 包含系统上每一个用户及他们仓库的通用配置。如果在执行 `git config` 时带上 `--system` 选项，那么它就会读写该文件中的配置变量。

② `~/.gitconfig` 或 `~/.config/git/config` 文件：只针对当前用户。可以传递 `--global` 选项让Git读写此文件，这会对你系统上**所有**的仓库生效。

③ 当前使用仓库的Git目录中的 `config` 文件（即 `.git/config`）：针对当前仓库。可以传递 `--local` 选项让Git强制读写此文件，虽然默认情况下用的就是它。但是需要进入某个Git仓库中才能让该选项生效。

每一个级别会覆盖上一级别的配置，所以 `.git/config` 的配置变量会覆盖 `/etc/gitconfig` 中的配置变量。

**查看所有的配置以及它们所在的文件：**

```bash
$ git config --list --show-origin
```

#### 3.2 设置用户信息

安装完Git之后，要做的第一件事就是设置用户名和邮件地址。这一点很重要，因为每一个Git提交都会使用这些信息，它们会写入到每一次提交中，不可更改：

```bash
$ git config --global user.name "xxx"
$ git config --global user.email xxx@xxx.com
```

可以为单独的仓库设置特殊的用户信息。
